@app.route('/cadastrar_atleta', methods=['GET', 'POST'])
def cadastrar_atleta():
    if request.method == 'POST':
        try:
            nascimento = datetime.strptime(
                request.form.get('nascimento'), '%Y-%m-%d'
            ).date()

            atleta = Atleta(
                nome=request.form.get('nome'),
                cpf=request.form.get('cpf'),
                nascimento=nascimento,
                categoria=request.form.get('categoria'),
                altura=float(request.form.get('altura')) if request.form.get('altura') else None,
                endereco=request.form.get('endereco'),
                telefone=request.form.get('telefone'),
                responsavel=request.form.get('responsavel'),
                telefone_responsavel=request.form.get('telefone_responsavel'),
                escola=request.form.get('escola'),
                local_treino=request.form.get('local_treino'),
                tamanho_camisa=request.form.get('tamanho_camisa'),
                numero_camisa=int(request.form.get('numero_camisa')) if request.form.get('numero_camisa') else None,
                padrao_jogo=True if request.form.get('padrao_jogo') == 'sim' else False,
                padrao_treino=True if request.form.get('padrao_treino') == 'sim' else False
            )

            db.session.add(atleta)
            db.session.commit()

            return redirect(url_for('atletas'))

        except Exception as e:
            return f"Erro ao salvar atleta: {str(e)}"

    return render_template('cadastrar_atleta.html')
