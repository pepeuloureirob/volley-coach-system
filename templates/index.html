<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<h1>Dashboard</h1>

<h2>Novo Atleta</h2>
<form method="POST" action="/novo_atleta">
    <input name="nome" placeholder="Nome" required>
    <input name="cpf" placeholder="CPF" required>
    <input name="data_nascimento" placeholder="Nascimento" required>
    <input name="categoria" placeholder="Categoria" required>
    <button type="submit">Salvar</button>
</form>

<h2>Nova Competição</h2>
<form method="POST" action="/nova_competicao">
    <input name="nome" placeholder="Nome" required>
    <input name="ano" placeholder="Ano" required>
    <input name="limite_atletas" placeholder="Limite" required>
    <button type="submit">Criar</button>
</form>

<hr>

<h2>Atletas</h2>
<div class="grid">
{% for atleta in atletas %}
<div class="card">
    <strong>{{ atleta.nome }}</strong><br><br>

    {% for comp in competicoes %}
        <a href="/inscrever/{{ atleta.id }}/{{ comp.id }}">
            Inscrever em {{ comp.nome }}
        </a><br>
    {% endfor %}

    <br>
    <a href="/excluir_atleta/{{ atleta.id }}">Excluir</a>
</div>
{% endfor %}
</div>

<hr>

<h2>Competições</h2>
<div class="grid">
{% for comp in competicoes %}
<div class="card">
    <strong>{{ comp.nome }}</strong><br>
    Ano: {{ comp.ano }}<br>
    Limite: {{ comp.limite_atletas }}<br><br>

    {% if comp.inscricoes %}
        <strong>Inscritos:</strong><br><br>
        {% for insc in comp.inscricoes %}
            • {{ insc.atleta.nome }}
            <a href="/remover_inscricao/{{ insc.id }}">❌</a><br>
        {% endfor %}
    {% else %}
        <em>Nenhum atleta inscrito</em>
    {% endif %}

    <br>
    <a href="/excluir_competicao/{{ comp.id }}">Excluir</a>
</div>
{% endfor %}
</div>

</body>
</html>
